{"remainingRequest":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/Registration-Form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/Registration-Form.vue","mtime":1609067290008},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVnaXN0cmF0aW9uRm9ybSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpcnN0TmFtZTogIiIsCiAgICAgIGxhc3ROYW1lOiAiIiwKICAgICAgdXNlcm5hbWU6ICIiLAogICAgICBlbWFpbDogIiIsCiAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgdmFsdWU6IFtdLAogICAgICBvcHRpb25zOiBbXSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy91c2VyIGlzIG5vdCBhdXRob3JpemVkID0+IFJlbWFpbiBhdCBsb2dpbiBwYWdlCiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dF90b2tlbiIpICE9PSBudWxsKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvaG9tZSIpOwogICAgfQogICAgdGhpcy5heGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9sZWN0dXJlcyIpLnRoZW4oKHJlcykgPT4gewogICAgICB0aGlzLm9wdGlvbnMgPSByZXMuZGF0YTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgb25DaGFuZ2UodmFsdWUpIHsKICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdDogYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWNjb3VudCgpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgbGVjdHVyZXNJRCA9IFtdOwogICAgICAgIHRoaXMudmFsdWUuZm9yRWFjaCgobGVjdHVyZSkgPT4gewogICAgICAgICAgbGVjdHVyZXNJRC5wdXNoKGxlY3R1cmUuX2lkKTsKICAgICAgICB9KTsKICAgICAgICBsZXQgdXNlciA9IHsKICAgICAgICAgIGZpcnN0X25hbWU6IHRoaXMuZmlyc3ROYW1lLAogICAgICAgICAgbGFzdF9uYW1lOiB0aGlzLmxhc3ROYW1lLAogICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgICAgZXhwZXJ0X29mX2xlY3R1cmVzOiBsZWN0dXJlc0lELAogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2codXNlcik7CiAgICAgICAgbGV0IG5ld1VzZXIgPSBhd2FpdCB0aGlzLmF4aW9zLnBvc3QoCiAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzIiwKICAgICAgICAgIHVzZXIKICAgICAgICApOwogICAgICAgIGNvbnNvbGUubG9nKCJBY2NvdW50IGNyZWF0ZWQiKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0X3Rva2VuIiwgbmV3VXNlci5kYXRhLmp3dF90b2tlbik7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJJRCIsIG5ld1VzZXIuZGF0YS51c2VySUQpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJmaXJzdE5hbWUiLCBuZXdVc2VyLmRhdGEuZmlyc3RfbmFtZSk7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9ob21lIik7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKCJBY2NvdW50IGNvdWxkIG5vdCBiZSBjcmVhdGVkIik7CiAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlKTsKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Registration-Form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Registration-Form.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <!-- component -->\n  <div class=\"bg-grey-lighter min-h-screen flex flex-col\">\n    <div\n      class=\"container max-w-sm mx-auto flex-1 flex flex-col items-center justify-center px-2\"\n    >\n      <div class=\"bg-white px-6 py-8 rounded shadow-md text-black w-full\">\n        <h1 class=\"mb-8 text-3xl text-center\">Create an account</h1>\n        <form @submit.prevent=\"handleSubmit\" method=\"POST\">\n          <input\n            type=\"text\"\n            class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n            name=\"firstName\"\n            id=\"firstName\"\n            v-model=\"firstName\"\n            placeholder=\"First name\"\n            required\n          />\n\n          <input\n            type=\"text\"\n            class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n            name=\"lastName\"\n            id=\"lastName\"\n            v-model=\"lastName\"\n            placeholder=\"Last name\"\n            required\n          />\n\n          <input\n            type=\"text\"\n            class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n            name=\"username\"\n            id=\"username\"\n            v-model=\"username\"\n            placeholder=\"Username\"\n            required\n          />\n\n          <input\n            type=\"email\"\n            class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n            name=\"email\"\n            id=\"email\"\n            v-model=\"email\"\n            placeholder=\"Email\"\n            required\n          />\n\n          <input\n            type=\"password\"\n            class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n            name=\"password\"\n            id=\"password\"\n            v-model=\"password\"\n            placeholder=\"Password\"\n            required\n          />\n\n          <multiselect\n            v-model=\"value\"\n            :options=\"options\"\n            label=\"title\"\n            track-by=\"title\"\n            :multiple=\"true\"\n            :close-on-select=\"true\"\n            @input=\"onChange\"\n            placeholder=\"Select lectures you are expert in\"\n          ></multiselect>\n\n          <input\n            type=\"submit\"\n            class=\"w-full text-center py-3 rounded bg-green text-black hover:bg-green-dark focus:outline-none my-1\"\n            value=\"Sign me up!\"\n          />\n        </form>\n        <div class=\"text-center text-sm text-grey-dark mt-4\">\n          By signing up, you agree to the\n          <router-link to=\"/register\">Terms of service</router-link>\n          and\n          <router-link to=\"/register\">Privacy Policy</router-link>\n        </div>\n      </div>\n\n      <div class=\"text-grey-dark mt-6\">\n        Already have an account?\n        <router-link to=\"/login\">Login</router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"RegistrationForm\",\n  data() {\n    return {\n      firstName: \"\",\n      lastName: \"\",\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      value: [],\n      options: [],\n    };\n  },\n  created() {\n    //user is not authorized => Remain at login page\n    if (localStorage.getItem(\"jwt_token\") !== null) {\n      this.$router.push(\"/home\");\n    }\n    this.axios.get(\"http://localhost:3000/lectures\").then((res) => {\n      this.options = res.data;\n    });\n  },\n  methods: {\n    onChange(value) {\n      this.value = value;\n    },\n    handleSubmit: async function createAccount() {\n      try {\n        var lecturesID = [];\n        this.value.forEach((lecture) => {\n          lecturesID.push(lecture._id);\n        });\n        let user = {\n          first_name: this.firstName,\n          last_name: this.lastName,\n          username: this.username,\n          email: this.email,\n          password: this.password,\n          expert_of_lectures: lecturesID,\n        };\n        console.log(user);\n        let newUser = await this.axios.post(\n          \"http://localhost:3000/users\",\n          user\n        );\n        console.log(\"Account created\");\n        localStorage.setItem(\"jwt_token\", newUser.data.jwt_token);\n        localStorage.setItem(\"userID\", newUser.data.userID);\n        localStorage.setItem(\"firstName\", newUser.data.first_name);\n        this.$router.push(\"/home\");\n      } catch (err) {\n        console.log(\"Account could not be created\");\n        console.log(err.response);\n      }\n    },\n  },\n};\n</script>\n"]}]}