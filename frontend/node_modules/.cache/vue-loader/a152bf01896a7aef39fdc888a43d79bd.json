{"remainingRequest":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/auth/Reset.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/auth/Reset.vue","mtime":1612773362627},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdGb3Jnb3QnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgICAgIHBhc3N3b3JkX2NvbmZpcm06ICcnCiAgICAgICAgfTsKICAgIH0sCiAgICBhc3luYyBtb3VudGVkKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICAgICAgICB0aGlzLiRyb290LiRyZWZzLk5hdmJhci5yZWxvYWROYXYoKTsKICAgICAgICAgICAgY29uc3Qgand0X3Rva2VuID0gdGhpcy4kcm91dGUucGFyYW1zLnRva2VuOwogICAgICAgICAgICBpZiAoand0X3Rva2VuKSB7CiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy5heGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvdmVyaWZ5VG9rZW5TYWx0JywKICAgICAgICAgICAgICAgICAgICB7fSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3RfdG9rZW59YAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVG9rZW4gdmFsaWQnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJHJlZnMuTmF2YmFyLnJlbG9hZE5hdigpOwogICAgICAgICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBUb2tlbicpOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgaGFuZGxlU3VibWl0OiBhc3luYyBmdW5jdGlvbiBjaGFuZ2VQYXNzb3dyZCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMucGFzc3dvcmQgPT09IHRoaXMucGFzc3dvcmRfY29uZmlybSkgewogICAgICAgICAgICAgICAgbGV0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXRCdXR0b24nKTsKICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBzdWJtaXRCdXR0b24uY2xhc3NOYW1lID0KICAgICAgICAgICAgICAgICAgICAndy1mdWxsIHB4LTQgcHktMiBmb250LWJvbGQgdGV4dC1ibGFjayBiZy1ncmV5LTUwMCByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JleS03MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnNoYWRvdy1vdXRsaW5lJzsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5heGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VwZGF0ZVBhc3N3b3JkJywKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiRyb3V0ZS5wYXJhbXMudG9rZW59YAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydCgnUGFzc293cmQgU3VjY2Vzc2Z1bGx5IFVwZGF0ZWQhJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCdSZXF1ZXN0IGNvdWxkIG5vdCBiZSBjb21wbGV0ZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuIEVycm9yOiAnICsgZS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydCgnUGFzc293cmRzIGRvIG5vdCBtYXRjaCEnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfTsK"},{"version":3,"sources":["Reset.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Reset.vue","sourceRoot":"src/components/auth","sourcesContent":["<template>\n    <div class=\"bg-grey-lighter min-h-screen flex flex-col\">\n        <img src=\"../../assets/logo.png\" class=\"w-96 mx-auto bounce-in-from-front-to-back\" />\n        <div class=\"container max-w-sm mx-auto items-center justify-center px-2\">\n            <h1 class=\"mb-8 text-3xl text-center\">Reset Your Password</h1>\n            <form @submit.prevent=\"handleSubmit\" method=\"POST\">\n                <input\n                    type=\"password\"\n                    class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                    name=\"password\"\n                    id=\"password\"\n                    v-model=\"password\"\n                    placeholder=\"Password\"\n                    required\n                />\n                <input\n                    type=\"password\"\n                    class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                    name=\"password\"\n                    id=\"password_confirm\"\n                    v-model=\"password_confirm\"\n                    placeholder=\"Confirm your passowrd\"\n                    required\n                />\n                <input\n                    type=\"submit\"\n                    id=\"submitButton\"\n                    class=\"w-full px-4 py-2 font-bold text-white bg-red-500 rounded-full hover:bg-red-700 focus:outline-none focus:shadow-outline\"\n                    value=\"Change Password\"\n                />\n            </form>\n            <br />\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'Forgot',\n    data() {\n        return {\n            password: '',\n            password_confirm: ''\n        };\n    },\n    async mounted() {\n        try {\n            localStorage.clear();\n            this.$root.$refs.Navbar.reloadNav();\n            const jwt_token = this.$route.params.token;\n            if (jwt_token) {\n                let result = await this.axios.post(\n                    'http://localhost:3000/verifyTokenSalt',\n                    {},\n                    {\n                        headers: {\n                            Authorization: `Bearer ${jwt_token}`\n                        }\n                    }\n                );\n                if (result.status === 200) {\n                    console.log('Token valid');\n                }\n            }\n        } catch (err) {\n            console.log(err.message);\n            localStorage.clear();\n            this.$router.push('/login');\n            this.$root.$refs.Navbar.reloadNav();\n            console.log('Invalid Token');\n        }\n    },\n    methods: {\n        handleSubmit: async function changePassowrd() {\n            if (this.password === this.password_confirm) {\n                let submitButton = document.getElementById('submitButton');\n                submitButton.disabled = true;\n                submitButton.className =\n                    'w-full px-4 py-2 font-bold text-black bg-grey-500 rounded-full hover:bg-grey-700 focus:outline-none focus:shadow-outline';\n                try {\n                    const res = await this.axios.post(\n                        'http://localhost:3000/updatePassword',\n                        {\n                            password: this.password\n                        },\n                        {\n                            headers: {\n                                Authorization: `Bearer ${this.$route.params.token}`\n                            }\n                        }\n                    );\n                    if (res.status === 200) {\n                        window.alert('Passowrd Successfully Updated!');\n                        this.$router.push('/login');\n                    }\n                } catch (e) {\n                    window.alert('Request could not be completed. Please try again later. Error: ' + e.message);\n                }\n            } else {\n                window.alert('Passowrds do not match!');\n            }\n        }\n    }\n};\n</script>\n"]}]}