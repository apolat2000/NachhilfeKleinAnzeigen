{"remainingRequest":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/Tutorials.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/Tutorials.vue","mtime":1610643633959},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUdXRvcmlhbHNJdGVtIGZyb20gJy4vVHV0b3JpYWxzSXRlbS52dWUnOwppbXBvcnQgVHV0b3JpYWxzUGFnZXMgZnJvbSAnLi9UdXRvcmlhbHNQYWdlcy52dWUnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogeyBUdXRvcmlhbHNJdGVtLCBUdXRvcmlhbHNQYWdlcyB9LAogICAgbmFtZTogJ1R1dG9yaWFscycsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHR1dG9yaWFsczogW10sCiAgICAgICAgICAgIGlzRWRpdGFibGU6IHsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBhZ2U6IDEKICAgICAgICB9OwogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgLy91c2VyIGlzIG5vdCBhdXRob3JpemVkID0+IFJlbWFpbiBhdCBsb2dpbiBwYWdlCiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3RfdG9rZW4nKSA9PT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgfQogICAgfSwKICAgIGFzeW5jIG1vdW50ZWQoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3Qgand0X3Rva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dF90b2tlbicpOwogICAgICAgICAgICBpZiAoand0X3Rva2VuKSB7CiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy5heGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvdmVyaWZ5UmVmcmVzaFRva2VuJywKICAgICAgICAgICAgICAgICAgICB7fSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3RfdG9rZW59YAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnand0X3Rva2VuJywgcmVzdWx0LmRhdGEuand0X3Rva2VuKTsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL3R1dG9yaWFscycsIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3RfdG9rZW4nKX1gCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHV0b3JpYWxzID0gcmVzdWx0LmRhdGEuZmlsdGVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudHV0b3IgIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubGVjdHVyZSAhPSBudWxsICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZS5wYXJzZShlbGVtZW50LmRhdGUpID49IERhdGUubm93KCkKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnWW91IGFyZSBub3QgYXV0aG9yaXplZCB0byBhY2Nlc3MgdGhpcyBwYWdlJyk7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJHJlZnMuTmF2YmFyLnJlbG9hZE5hdigpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0xvZ2dlZCBvdXQnKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgICAgIHRoaXMuJHJvb3QuJHJlZnMuTmF2YmFyLnJlbG9hZE5hdigpOwogICAgICAgICAgICBjb25zb2xlLmxvZygnTG9nZ2VkIG91dCcpOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZ2V0VXNlcklkKCkgewogICAgICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJRCcpOwogICAgICAgIH0sCiAgICAgICAgdXBkYXRlQ3VycmVudFBhZ2UoY3VycmVudFBhZ2UpIHsKICAgICAgICAgICAgdGhpcy5wYWdlID0gY3VycmVudFBhZ2U7CiAgICAgICAgfQogICAgfQp9Owo="},{"version":3,"sources":["Tutorials.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tutorials.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <div class=\"flex flex-col\">\n            <div class=\"overflow-x-auto\">\n                <div class=\"align-middle inline-block\">\n                    <table class=\"min-w-full divide-y divide-gray-200 shadow-lg\">\n                        <thead class=\"bg-gray-50\">\n                            <tr>\n                                <th\n                                    scope=\"col\"\n                                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                                >\n                                    Lecture\n                                </th>\n                                <th\n                                    scope=\"col\"\n                                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                                >\n                                    Class size\n                                </th>\n                                <th\n                                    scope=\"col\"\n                                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                                >\n                                    Title\n                                </th>\n                                <th\n                                    scope=\"col\"\n                                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                                >\n                                    Status\n                                </th>\n                                <th\n                                    scope=\"col\"\n                                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                                >\n                                    Specifics\n                                </th>\n                                <th\n                                    scope=\"col\"\n                                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                                >\n                                    Edit\n                                </th>\n                                <th\n                                    scope=\"col\"\n                                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                                >\n                                    Tutorium page\n                                </th>\n                                <th\n                                    scope=\"col\"\n                                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                                >\n                                    Meeting Link\n                                </th>\n                                <th\n                                    scope=\"col\"\n                                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                                >\n                                    Sign Up\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody v-bind:key=\"tutorial.id\" v-for=\"(tutorial, index) in tutorials\">\n                            <tutorials-item\n                                v-if=\"index < page * 10 && index >= (page - 1) * 10\"\n                                v-bind:canEdit=\"getUserId() == tutorial.tutor._id\"\n                                v-bind:tutorial=\"tutorial\"\n                                v-bind:order=\"tutorials.length\"\n                            />\n                        </tbody>\n                    </table>\n                    <tutorials-pages\n                        :tutorialsLength=\"tutorials.length\"\n                        :maxPages=\"Math.ceil(tutorials.length / 10.0)\"\n                        @updateCurrentPage=\"updateCurrentPage($event)\"\n                    />\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport TutorialsItem from './TutorialsItem.vue';\nimport TutorialsPages from './TutorialsPages.vue';\n\nexport default {\n    components: { TutorialsItem, TutorialsPages },\n    name: 'Tutorials',\n    data() {\n        return {\n            tutorials: [],\n            isEditable: {\n                default: false\n            },\n            page: 1\n        };\n    },\n    created() {\n        //user is not authorized => Remain at login page\n        if (localStorage.getItem('jwt_token') === null) {\n            this.$router.push('/login');\n        }\n    },\n    async mounted() {\n        try {\n            const jwt_token = localStorage.getItem('jwt_token');\n            if (jwt_token) {\n                let result = await this.axios.post(\n                    'http://localhost:3000/verifyRefreshToken',\n                    {},\n                    {\n                        headers: {\n                            Authorization: `Bearer ${jwt_token}`\n                        }\n                    }\n                );\n                if (result.status === 200) {\n                    localStorage.setItem('jwt_token', result.data.jwt_token);\n                    result = await this.axios.get('http://localhost:3000/tutorials', {\n                        headers: {\n                            Authorization: `Bearer ${localStorage.getItem('jwt_token')}`\n                        }\n                    });\n                    if (result.status === 200) {\n                        this.tutorials = result.data.filter(\n                            element =>\n                                element.tutor != null &&\n                                element.lecture != null &&\n                                Date.parse(element.date) >= Date.now()\n                        );\n                    }\n                }\n            } else {\n                console.log('You are not authorized to access this page');\n                localStorage.clear();\n                this.$router.push('/login');\n                this.$root.$refs.Navbar.reloadNav();\n                console.log('Logged out');\n            }\n        } catch (err) {\n            console.log(err.message);\n            localStorage.clear();\n            this.$router.push('/login');\n            this.$root.$refs.Navbar.reloadNav();\n            console.log('Logged out');\n        }\n    },\n    methods: {\n        getUserId() {\n            return localStorage.getItem('userID');\n        },\n        updateCurrentPage(currentPage) {\n            this.page = currentPage;\n        }\n    }\n};\n</script>\n"]}]}