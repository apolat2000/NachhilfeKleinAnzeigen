{"remainingRequest":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/Registration-Form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/Registration-Form.vue","mtime":1610964652371},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdSZWdpc3RyYXRpb25Gb3JtJywKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZmlyc3ROYW1lOiAnJywKICAgICAgICAgICAgbGFzdE5hbWU6ICcnLAogICAgICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgICAgIGVtYWlsOiAnJywKICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgICAgICB2YWx1ZTogW10sCiAgICAgICAgICAgIG9wdGlvbnM6IFtdCiAgICAgICAgfTsKICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIC8vdXNlciBpcyBub3QgYXV0aG9yaXplZCA9PiBSZW1haW4gYXQgbG9naW4gcGFnZQogICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0X3Rva2VuJykgIT09IG51bGwpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9ob21lJyk7CiAgICAgICAgfQogICAgICAgIHRoaXMuYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvbGVjdHVyZXMnKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHJlcy5kYXRhOwogICAgICAgIH0pOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBvbkNoYW5nZSh2YWx1ZSkgewogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTdWJtaXQ6IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFjY291bnQoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2YXIgbGVjdHVyZXNJRCA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5mb3JFYWNoKGxlY3R1cmUgPT4gewogICAgICAgICAgICAgICAgICAgIGxlY3R1cmVzSUQucHVzaChsZWN0dXJlLl9pZCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxldCB1c2VyID0gewogICAgICAgICAgICAgICAgICAgIGZpcnN0X25hbWU6IHRoaXMuZmlyc3ROYW1lLAogICAgICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogdGhpcy5sYXN0TmFtZSwKICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICBleHBlcnRfb2ZfbGVjdHVyZXM6IGxlY3R1cmVzSUQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBsZXQgbmV3VXNlciA9IGF3YWl0IHRoaXMuYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzJywgdXNlcik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWNjb3VudCBjcmVhdGVkJyk7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnand0X3Rva2VuJywgbmV3VXNlci5kYXRhLmp3dF90b2tlbik7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklEJywgbmV3VXNlci5kYXRhLnVzZXJJRCk7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmlyc3ROYW1lJywgbmV3VXNlci5kYXRhLmZpcnN0X25hbWUpOwogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9ob21lJyk7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRyZWZzLk5hdmJhci5yZWxvYWROYXYoKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWNjb3VudCBjb3VsZCBub3QgYmUgY3JlYXRlZCcpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfTsK"},{"version":3,"sources":["Registration-Form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Registration-Form.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <!-- component -->\n    <div class=\"bg-grey-lighter min-h-screen flex flex-col\">\n        <div class=\"container max-w-sm mx-auto flex-1 flex flex-col items-center justify-center px-2\">\n            <div class=\"bg-white px-6 py-8 rounded shadow-md text-black w-full\">\n                <h1 class=\"mb-8 text-3xl text-center\">Create an account</h1>\n                <form @submit.prevent=\"handleSubmit\" method=\"POST\">\n                    <input\n                        type=\"text\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"firstName\"\n                        id=\"firstName\"\n                        v-model=\"firstName\"\n                        placeholder=\"First name\"\n                        required\n                    />\n\n                    <input\n                        type=\"text\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"lastName\"\n                        id=\"lastName\"\n                        v-model=\"lastName\"\n                        placeholder=\"Last name\"\n                        required\n                    />\n\n                    <input\n                        type=\"text\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"username\"\n                        id=\"username\"\n                        v-model=\"username\"\n                        placeholder=\"Username\"\n                        required\n                    />\n\n                    <input\n                        type=\"email\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"email\"\n                        id=\"email\"\n                        v-model=\"email\"\n                        placeholder=\"Email\"\n                        required\n                    />\n\n                    <input\n                        type=\"password\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"password\"\n                        id=\"password\"\n                        v-model=\"password\"\n                        placeholder=\"Password\"\n                        required\n                    />\n\n                    <multiselect\n                        v-model=\"value\"\n                        :options=\"options\"\n                        label=\"title\"\n                        track-by=\"title\"\n                        :multiple=\"true\"\n                        :close-on-select=\"true\"\n                        @input=\"onChange\"\n                        placeholder=\"Select lectures you are expert in\"\n                    ></multiselect>\n\n                    <input\n                        type=\"submit\"\n                        class=\"w-full text-center text-white py-3 rounded bg-green-500 text-black hover:bg-green-600 focus:outline-none my-1 cursor-pointer\"\n                        value=\"Sign me up!\"\n                    />\n                </form>\n                <div class=\"text-center text-sm text-grey-dark mt-4\">\n                    By signing up, you agree to the\n                    <router-link to=\"/register\">Terms of service</router-link>\n                    and\n                    <router-link to=\"/register\">Privacy Policy</router-link>\n                </div>\n            </div>\n\n            <div class=\"text-grey-dark mt-6\">\n                Already have an account?\n                <router-link to=\"/login\">Login</router-link>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'RegistrationForm',\n    data() {\n        return {\n            firstName: '',\n            lastName: '',\n            username: '',\n            email: '',\n            password: '',\n            value: [],\n            options: []\n        };\n    },\n    created() {\n        //user is not authorized => Remain at login page\n        if (localStorage.getItem('jwt_token') !== null) {\n            this.$router.push('/home');\n        }\n        this.axios.get('http://localhost:3000/lectures').then(res => {\n            this.options = res.data;\n        });\n    },\n    methods: {\n        onChange(value) {\n            this.value = value;\n        },\n        handleSubmit: async function createAccount() {\n            try {\n                var lecturesID = [];\n                this.value.forEach(lecture => {\n                    lecturesID.push(lecture._id);\n                });\n                let user = {\n                    first_name: this.firstName,\n                    last_name: this.lastName,\n                    username: this.username,\n                    email: this.email,\n                    password: this.password,\n                    expert_of_lectures: lecturesID\n                };\n                let newUser = await this.axios.post('http://localhost:3000/users', user);\n                console.log('Account created');\n                localStorage.setItem('jwt_token', newUser.data.jwt_token);\n                localStorage.setItem('userID', newUser.data.userID);\n                localStorage.setItem('firstName', newUser.data.first_name);\n                this.$router.push('/home');\n                this.$root.$refs.Navbar.reloadNav();\n            } catch (err) {\n                console.log('Account could not be created');\n                console.log(err.response);\n            }\n        }\n    }\n};\n</script>\n"]}]}