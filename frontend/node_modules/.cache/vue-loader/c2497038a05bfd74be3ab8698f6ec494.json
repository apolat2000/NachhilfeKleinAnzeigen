{"remainingRequest":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/auth/Registration-Form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/auth/Registration-Form.vue","mtime":1612773362627},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdSZWdpc3RyYXRpb25Gb3JtJywKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZmlyc3ROYW1lOiAnJywKICAgICAgICAgICAgbGFzdE5hbWU6ICcnLAogICAgICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgICAgIGVtYWlsOiAnJywKICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgICAgICB2YWx1ZTogW10sCiAgICAgICAgICAgIG9wdGlvbnM6IFtdLAogICAgICAgICAgICBpbWFnZTogJycKICAgICAgICB9OwogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgLy91c2VyIGlzIG5vdCBhdXRob3JpemVkID0+IFJlbWFpbiBhdCBsb2dpbiBwYWdlCiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3RfdG9rZW4nKSAhPT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICAgIH0KICAgICAgICB0aGlzLmF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2xlY3R1cmVzJykudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSByZXMuZGF0YTsKICAgICAgICB9KTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgb25DaGFuZ2UodmFsdWUpIHsKICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgICAgIH0sCiAgICAgICAgcHJvY2Vzc0ZpbGUoZXZlbnQpIHsKICAgICAgICAgICAgdGhpcy5pbWFnZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZVN1Ym1pdDogYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWNjb3VudCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBsZWN0dXJlc0lEID0gW107CiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLmZvckVhY2gobGVjdHVyZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGVjdHVyZXNJRC5wdXNoKGxlY3R1cmUuX2lkKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbGV0IHVzZXIgPSB7CiAgICAgICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogdGhpcy5maXJzdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgbGFzdF9uYW1lOiB0aGlzLmxhc3ROYW1lLAogICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgICAgICAgICAgICAgIGV4cGVydF9vZl9sZWN0dXJlczogbGVjdHVyZXNJRCwKICAgICAgICAgICAgICAgICAgICBpbWc6IHRoaXMuaW1hZ2UKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHVzZXIpLmZvckVhY2goa2V5ID0+IGZvcm1EYXRhLmFwcGVuZChrZXksIHVzZXJba2V5XSkpOwogICAgICAgICAgICAgICAgbGV0IG5ld1VzZXIgPSBhd2FpdCB0aGlzLmF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2VycycsIGZvcm1EYXRhKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBY2NvdW50IGNyZWF0ZWQnKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdqd3RfdG9rZW4nLCBuZXdVc2VyLmRhdGEuand0X3Rva2VuKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySUQnLCBuZXdVc2VyLmRhdGEudXNlcklEKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmaXJzdE5hbWUnLCBuZXdVc2VyLmRhdGEuZmlyc3RfbmFtZSk7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kcmVmcy5OYXZiYXIucmVsb2FkTmF2KCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCdBY2NvdW50IGNvdWxkIG5vdCBiZSBjcmVhdGVkJywgZXJyKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["Registration-Form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Registration-Form.vue","sourceRoot":"src/components/auth","sourcesContent":["<template>\n    <div class=\"bg-grey-lighter flex flex-col\">\n        <div class=\"container pt-16 max-w-sm mx-auto flex-1 flex flex-col items-center justify-center px-2\">\n            <div class=\"bg-white px-6 py-8 rounded shadow-md text-black w-full\">\n                <h1 class=\"mb-8 text-3xl text-center\">Create an account</h1>\n                <form @submit.prevent=\"handleSubmit\" method=\"POST\">\n                    <input\n                        type=\"text\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"firstName\"\n                        id=\"firstName\"\n                        v-model=\"firstName\"\n                        placeholder=\"First name\"\n                        required\n                    />\n\n                    <input\n                        type=\"text\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"lastName\"\n                        id=\"lastName\"\n                        v-model=\"lastName\"\n                        placeholder=\"Last name\"\n                        required\n                    />\n\n                    <input\n                        type=\"text\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"username\"\n                        id=\"username\"\n                        v-model=\"username\"\n                        placeholder=\"Username\"\n                        required\n                    />\n\n                    <input\n                        type=\"email\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"email\"\n                        id=\"email\"\n                        v-model=\"email\"\n                        placeholder=\"Email\"\n                        required\n                    />\n\n                    <label for=\"image\">\n                        Profile Picture\n                    </label>\n                    <input\n                        type=\"file\"\n                        single\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"image\"\n                        id=\"image\"\n                        accept=\".png, .jpeg, .jpg\"\n                        @change=\"processFile($event)\"\n                    />\n\n                    <input\n                        type=\"password\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"password\"\n                        id=\"password\"\n                        v-model=\"password\"\n                        placeholder=\"Password\"\n                        required\n                    />\n\n                    <multiselect\n                        v-model=\"value\"\n                        :options=\"options\"\n                        label=\"title\"\n                        track-by=\"title\"\n                        :multiple=\"true\"\n                        :close-on-select=\"true\"\n                        @input=\"onChange\"\n                        placeholder=\"Select lectures you are expert in\"\n                    ></multiselect>\n\n                    <input\n                        type=\"submit\"\n                        class=\"w-full text-center text-white py-3 rounded bg-green-500 text-black hover:bg-green-600 focus:outline-none my-1 cursor-pointer\"\n                        value=\"Sign me up!\"\n                    />\n                </form>\n                <div class=\"text-center text-sm text-grey-dark mt-4\">\n                    By signing up, you agree to the\n                    <router-link to=\"/register\">Terms of service</router-link>\n                    and\n                    <router-link to=\"/register\">Privacy Policy</router-link>\n                </div>\n            </div>\n\n            <div class=\"text-grey-dark mt-6\">\n                Already have an account?\n                <router-link to=\"/login\">Login</router-link>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'RegistrationForm',\n    data() {\n        return {\n            firstName: '',\n            lastName: '',\n            username: '',\n            email: '',\n            password: '',\n            value: [],\n            options: [],\n            image: ''\n        };\n    },\n    created() {\n        //user is not authorized => Remain at login page\n        if (localStorage.getItem('jwt_token') !== null) {\n            this.$router.push('/');\n        }\n        this.axios.get('http://localhost:3000/lectures').then(res => {\n            this.options = res.data;\n        });\n    },\n    methods: {\n        onChange(value) {\n            this.value = value;\n        },\n        processFile(event) {\n            this.image = event.target.files[0];\n        },\n        handleSubmit: async function createAccount() {\n            try {\n                var lecturesID = [];\n                this.value.forEach(lecture => {\n                    lecturesID.push(lecture._id);\n                });\n                let user = {\n                    first_name: this.firstName,\n                    last_name: this.lastName,\n                    username: this.username,\n                    email: this.email,\n                    password: this.password,\n                    expert_of_lectures: lecturesID,\n                    img: this.image\n                };\n                var formData = new FormData();\n                Object.keys(user).forEach(key => formData.append(key, user[key]));\n                let newUser = await this.axios.post('http://localhost:3000/users', formData);\n                console.log('Account created');\n                localStorage.setItem('jwt_token', newUser.data.jwt_token);\n                localStorage.setItem('userID', newUser.data.userID);\n                localStorage.setItem('firstName', newUser.data.first_name);\n                this.$router.push('/');\n                this.$root.$refs.Navbar.reloadNav();\n            } catch (err) {\n                window.alert('Account could not be created', err);\n                console.log(err.response);\n            }\n        }\n    }\n};\n</script>\n"]}]}