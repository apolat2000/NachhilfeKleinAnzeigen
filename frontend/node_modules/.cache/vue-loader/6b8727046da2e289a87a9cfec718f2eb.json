{"remainingRequest":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/Create-Tutorial.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/Create-Tutorial.vue","mtime":1609321709525},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdUdXRDcmVhdGlvbkZvcm0nLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzaXplOiAnJywKICAgICAgICAgICAgbGVjdHVyZTogJycsCiAgICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgICAgZGF0ZTogJycsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICAgICAgb3B0aW9uczogW10KICAgICAgICB9OwogICAgfSwKICAgIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICAgICAgLy91c2VyIGlzIG5vdCBhdXRob3JpemVkID0+IFJlbWFpbiBhdCBsb2dpbiBwYWdlCiAgICAgICAgdmFyIGp3dF90b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3RfdG9rZW4nKTsKICAgICAgICBpZiAoand0X3Rva2VuKSB7CiAgICAgICAgICAgIGxldCBuZXdUb2tlbiA9IGF3YWl0IHRoaXMuYXhpb3MucG9zdCgKICAgICAgICAgICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvdmVyaWZ5UmVmcmVzaFRva2VuJywKICAgICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2p3dF90b2tlbn1gCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgICBpZiAobmV3VG9rZW4uc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdqd3RfdG9rZW4nLCBuZXdUb2tlbi5kYXRhLmp3dF90b2tlbik7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBsZWN0dXJlcyA9IGF3YWl0IHRoaXMuYXhpb3MuZ2V0KAogICAgICAgICAgICAgICAgICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXIvJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySUQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0X3Rva2VuJyl9YAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBsZWN0dXJlcy5kYXRhLmV4cGVydF9vZl9sZWN0dXJlczsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdZb3UgYXJlIG5vdCBhdXRob3JpemVkIHRvIGFjY2VzcyB0aGlzIHBhZ2UhJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygnWW91IGFyZSBub3QgYXV0aG9yaXplZCB0byBhY2Nlc3MgdGhpcyBwYWdlIScpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBvbkNoYW5nZSh2YWx1ZSkgewogICAgICAgICAgICB0aGlzLmxlY3R1cmUgPSB2YWx1ZS5faWQ7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTdWJtaXQ6IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVR1dG9yaWFsKCkgewogICAgICAgICAgICBpZiAodGhpcy5sZWN0dXJlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCB0dXRvcmlhbCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3Nfc2l6ZTogdGhpcy5zaXplLAogICAgICAgICAgICAgICAgICAgICAgICB0dXRvcjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJRCcpLAogICAgICAgICAgICAgICAgICAgICAgICBsZWN0dXJlOiB0aGlzLmxlY3R1cmUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLmRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBpc19BY3RpdmU6IHRydWUKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLmF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC90dXRvcmlhbHMnLCB0dXRvcmlhbCwgewogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dF90b2tlbicpfWAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1R1dG9yaWFsIGNyZWF0ZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy90dXRvcmlhbHMnKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQW4gZXJyb3Igb2NjdXJlZCEnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUGxlYXNlIHNlbGVjdCBhIGxlY3R1cmUnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfTsK"},{"version":3,"sources":["Create-Tutorial.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Create-Tutorial.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <!-- component -->\n    <div class=\"bg-grey-lighter min-h-screen flex flex-col\">\n        <div class=\"container max-w-sm mx-auto flex-2 flex flex-col items-center justify-center px-2\">\n            <div class=\"bg-white px-6 py-8 rounded shadow-md text-black w-full\">\n                <h1 class=\"mb-8 text-3xl text-center\">Create New Tutorial</h1>\n                <form @submit.prevent=\"handleSubmit\" method=\"POST\">\n                    <multiselect\n                        v-model=\"lecture\"\n                        :options=\"options\"\n                        :multiple=\"false\"\n                        :close-on-select=\"true\"\n                        :clear-on-select=\"false\"\n                        :preserve-search=\"true\"\n                        placeholder=\"Pick lecture for tutorial\"\n                        label=\"title\"\n                        track-by=\"title\"\n                        :allow-empty=\"false\"\n                        :preselect-first=\"true\"\n                    >\n                    </multiselect>\n                    <br />\n\n                    <input\n                        type=\"text\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"title\"\n                        id=\"title\"\n                        v-model=\"title\"\n                        placeholder=\"Tutorial title\"\n                        required\n                    />\n\n                    <input\n                        type=\"datetime-local\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"date\"\n                        id=\"date\"\n                        v-model=\"date\"\n                        placeholder=\"Tutorial date\"\n                        required\n                    />\n\n                    <input\n                        type=\"text\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"description\"\n                        id=\"description\"\n                        v-model=\"description\"\n                        placeholder=\"Description\"\n                        required\n                    />\n\n                    <input\n                        required\n                        type=\"number\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"classSize\"\n                        id=\"classSize\"\n                        v-model=\"size\"\n                        placeholder=\"Class size (e.g., 5)\"\n                    />\n                    <input\n                        class=\"w-full text-center py-3 rounded bg-green text-black hover:bg-green-dark focus:outline-none my-1\"\n                        type=\"submit\"\n                        value=\"Create Tutorial\"\n                    />\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'TutCreationForm',\n    data() {\n        return {\n            size: '',\n            lecture: '',\n            title: '',\n            date: '',\n            description: '',\n            options: []\n        };\n    },\n    async created() {\n        //user is not authorized => Remain at login page\n        var jwt_token = localStorage.getItem('jwt_token');\n        if (jwt_token) {\n            let newToken = await this.axios.post(\n                'http://localhost:3000/verifyRefreshToken',\n                {},\n                {\n                    headers: {\n                        Authorization: `Bearer ${jwt_token}`\n                    }\n                }\n            );\n            if (newToken.status === 200) {\n                localStorage.setItem('jwt_token', newToken.data.jwt_token);\n                try {\n                    let lectures = await this.axios.get(\n                        'http://localhost:3000/user/' + localStorage.getItem('userID'),\n                        {\n                            headers: {\n                                Authorization: `Bearer ${localStorage.getItem('jwt_token')}`\n                            }\n                        }\n                    );\n                    this.options = lectures.data.expert_of_lectures;\n                } catch (err) {\n                    console.log(err.message);\n                }\n            } else {\n                console.log('You are not authorized to access this page!');\n            }\n        } else {\n            console.log('You are not authorized to access this page!');\n            this.$router.push('/login');\n        }\n    },\n    methods: {\n        onChange(value) {\n            this.lecture = value._id;\n        },\n        handleSubmit: async function createTutorial() {\n            if (this.lecture) {\n                try {\n                    let tutorial = {\n                        class_size: this.size,\n                        tutor: localStorage.getItem('userID'),\n                        lecture: this.lecture,\n                        title: this.title,\n                        date: this.date,\n                        description: this.description,\n                        is_Active: true\n                    };\n                    let result = await this.axios.post('http://localhost:3000/tutorials', tutorial, {\n                        headers: {\n                            Authorization: `Bearer ${localStorage.getItem('jwt_token')}`\n                        }\n                    });\n                    if (result) {\n                        console.log('Tutorial created');\n                        this.$router.push('/tutorials');\n                    } else {\n                        console.log('An error occured!');\n                    }\n                } catch (err) {\n                    console.log(err.message);\n                }\n            } else {\n                console.log('Please select a lecture');\n            }\n        }\n    }\n};\n</script>\n"]}]}