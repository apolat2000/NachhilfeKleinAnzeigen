{"remainingRequest":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/TutorialForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/TutorialForm.vue","mtime":1612091585293},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIHByb3BzOiB7CiAgICAgICAgdHV0b3JpYWw6IHsKICAgICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7fQogICAgICAgIH0sCiAgICAgICAgcGFnZVRpdGxlOnsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OiAnQ3JlYXRlIE5ldyBUdXRvcmlhbCcKICAgICAgICB9CiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzaXplOiAnJywKICAgICAgICAgICAgbGVjdHVyZTogJycsCiAgICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgICAgZGF0ZTogJycsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICAgICAgb3B0aW9uczogW10sCiAgICAgICAgICAgIGJ1dHRvblZhbHVlOiAnQ3JlYXRlIFR1dG9yaWFsJwogICAgICAgIH07CiAgICB9LAogICAgYXN5bmMgY3JlYXRlZCgpIHsKICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy50dXRvcmlhbCB8fCB7fSkubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgIHRoaXMuYnV0dG9uVmFsdWUgPSAnRWRpdCBUdXRvcmlhbCc7CiAgICAgICAgfQogICAgICAgIC8vdXNlciBpcyBub3QgYXV0aG9yaXplZCA9PiBSZW1haW4gYXQgbG9naW4gcGFnZQogICAgICAgIHZhciBqd3RfdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0X3Rva2VuJyk7CiAgICAgICAgaWYgKGp3dF90b2tlbikgewogICAgICAgICAgICBsZXQgbmV3VG9rZW4gPSBhd2FpdCB0aGlzLmF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3ZlcmlmeVJlZnJlc2hUb2tlbicsCiAgICAgICAgICAgICAgICB7fSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3RfdG9rZW59YAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKG5ld1Rva2VuLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnand0X3Rva2VuJywgbmV3VG9rZW4uZGF0YS5qd3RfdG9rZW4pOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBsZXQgbGVjdHVyZXMgPSBhd2FpdCB0aGlzLmF4aW9zLmdldCgKICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2VyLycgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklEJyksCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dF90b2tlbicpfWAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gbGVjdHVyZXMuZGF0YS5leHBlcnRfb2ZfbGVjdHVyZXM7CiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMudHV0b3JpYWwgfHwge30pLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RpZmllZERhdGUgPSB0aGlzLnR1dG9yaWFsLmRhdGUuc3BsaXQoJzonKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMudHV0b3JpYWwudGl0bGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGVjdHVyZSA9IHRoaXMudHV0b3JpYWwubGVjdHVyZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlID0gYCR7bW9kaWZpZWREYXRlWzBdfToke21vZGlmaWVkRGF0ZVsxXS5zdWJzdHJpbmcoMCwgMil9YDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHRoaXMudHV0b3JpYWwuZGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHRoaXMudHV0b3JpYWwuY2xhc3Nfc2l6ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnWW91IGFyZSBub3QgYXV0aG9yaXplZCB0byBhY2Nlc3MgdGhpcyBwYWdlIScpOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRyZWZzLk5hdmJhci5yZWxvYWROYXYoKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2dnZWQgb3V0Jyk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygnWW91IGFyZSBub3QgYXV0aG9yaXplZCB0byBhY2Nlc3MgdGhpcyBwYWdlIScpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgICAgICB0aGlzLiRyb290LiRyZWZzLk5hdmJhci5yZWxvYWROYXYoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0xvZ2dlZCBvdXQnKTsKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIG9uQ2hhbmdlKHZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMubGVjdHVyZSA9IHZhbHVlLl9pZDsKICAgICAgICB9LAogICAgICAgIGhhbmRsZVN1Ym1pdDogYXN5bmMgZnVuY3Rpb24gY3JlYXRlVHV0b3JpYWwoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmxlY3R1cmUpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHV0b3JpYWwgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzX3NpemU6IHRoaXMuc2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgdHV0b3I6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySUQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgbGVjdHVyZTogdGhpcy5sZWN0dXJlLAogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5kYXRlLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgaXNfQWN0aXZlOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnR1dG9yaWFsIHx8IHt9KS5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5heGlvcy5wdXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDozMDAwL3R1dG9yaWFsLyR7dGhpcy50dXRvcmlhbC5faWR9YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR1dG9yaWFsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3RfdG9rZW4nKX1gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuYXhpb3MucG9zdChgaHR0cDovL2xvY2FsaG9zdDozMDAwL3R1dG9yaWFsc2AsIHR1dG9yaWFsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3RfdG9rZW4nKX1gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdHV0b3JpYWxzJyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FuIGVycm9yIG9jY3VyZWQhJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kc3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRmllbGQgZW1wdHkuJywKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnUGxlYXNlIHNlbGVjdCBhIGxlY3R1cmUhJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["TutorialForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TutorialForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <!-- component -->\n    <div class=\"bg-grey-lighter flex flex-col\">\n        <div class=\"container pt-16 max-w-sm mx-auto flex-2 flex flex-col items-center justify-center px-2\">\n            <div class=\"bg-white px-6 py-8 rounded shadow-md text-black w-full\">\n                <h1 class=\"mb-8 text-3xl text-center\">{{ pageTitle }}</h1>\n                <form @submit.prevent=\"handleSubmit\" method=\"POST\">\n                    <multiselect\n                        v-model=\"lecture\"\n                        :options=\"options\"\n                        :multiple=\"false\"\n                        :close-on-select=\"true\"\n                        :clear-on-select=\"false\"\n                        :preserve-search=\"true\"\n                        placeholder=\"Pick lecture for tutorial\"\n                        label=\"title\"\n                        track-by=\"title\"\n                        :allow-empty=\"false\"\n                        :preselect-first=\"true\"\n                    >\n                    </multiselect>\n                    <br />\n\n                    <input\n                        type=\"text\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"title\"\n                        id=\"title\"\n                        v-model=\"title\"\n                        placeholder=\"Tutorial title\"\n                        required\n                    />\n\n                    <input\n                        type=\"datetime-local\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"date\"\n                        id=\"date\"\n                        v-model=\"date\"\n                        placeholder=\"Tutorial date\"\n                        required\n                    />\n\n                    <input\n                        type=\"text\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"description\"\n                        id=\"description\"\n                        v-model=\"description\"\n                        placeholder=\"Description\"\n                        required\n                    />\n\n                    <input\n                        required\n                        type=\"number\"\n                        class=\"block border border-grey-light w-full p-3 rounded mb-4\"\n                        name=\"classSize\"\n                        min=\"1\"\n                        max=\"15\"\n                        id=\"classSize\"\n                        v-model=\"size\"\n                        placeholder=\"Class size (e.g., 5)\"\n                    />\n                    <input\n                        class=\"w-full text-center text-white py-3 rounded bg-green-500 text-black hover:bg-green-600 focus:outline-none my-1 cursor-pointer\"\n                        type=\"submit\"\n                        :value=\"buttonValue\"\n                    />\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    props: {\n        tutorial: {\n            type: Object,\n            default: () => {}\n        },\n        pageTitle:{\n            type: String,\n            default: 'Create New Tutorial'\n        }\n    },\n    data() {\n        return {\n            size: '',\n            lecture: '',\n            title: '',\n            date: '',\n            description: '',\n            options: [],\n            buttonValue: 'Create Tutorial'\n        };\n    },\n    async created() {\n        if (Object.keys(this.tutorial || {}).length !== 0) {\n            this.buttonValue = 'Edit Tutorial';\n        }\n        //user is not authorized => Remain at login page\n        var jwt_token = localStorage.getItem('jwt_token');\n        if (jwt_token) {\n            let newToken = await this.axios.post(\n                'http://localhost:3000/verifyRefreshToken',\n                {},\n                {\n                    headers: {\n                        Authorization: `Bearer ${jwt_token}`\n                    }\n                }\n            );\n            if (newToken.status === 200) {\n                localStorage.setItem('jwt_token', newToken.data.jwt_token);\n                try {\n                    let lectures = await this.axios.get(\n                        'http://localhost:3000/user/' + localStorage.getItem('userID'),\n                        {\n                            headers: {\n                                Authorization: `Bearer ${localStorage.getItem('jwt_token')}`\n                            }\n                        }\n                    );\n                    this.options = lectures.data.expert_of_lectures;\n                    if (Object.keys(this.tutorial || {}).length !== 0) {\n                        const modifiedDate = this.tutorial.date.split(':');\n                        this.title = this.tutorial.title;\n                        this.lecture = this.tutorial.lecture;\n                        this.date = `${modifiedDate[0]}:${modifiedDate[1].substring(0, 2)}`;\n                        this.description = this.tutorial.description;\n                        this.size = this.tutorial.class_size;\n                    }\n                } catch (err) {\n                    console.log(err.message);\n                }\n            } else {\n                console.log('You are not authorized to access this page!');\n                localStorage.clear();\n                this.$router.push('/login');\n                this.$root.$refs.Navbar.reloadNav();\n                console.log('Logged out');\n            }\n        } else {\n            console.log('You are not authorized to access this page!');\n            localStorage.clear();\n            this.$router.push('/login');\n            this.$root.$refs.Navbar.reloadNav();\n            console.log('Logged out');\n        }\n    },\n    methods: {\n        onChange(value) {\n            this.lecture = value._id;\n        },\n        handleSubmit: async function createTutorial() {\n            if (this.lecture) {\n                try {\n                    const tutorial = {\n                        class_size: this.size,\n                        tutor: localStorage.getItem('userID'),\n                        lecture: this.lecture,\n                        title: this.title,\n                        date: this.date,\n                        description: this.description,\n                        is_Active: true\n                    };\n                    var result;\n                    if (Object.keys(this.tutorial || {}).length !== 0) {\n                        result = await this.axios.put(\n                            `http://localhost:3000/tutorial/${this.tutorial._id}`,\n                            tutorial,\n                            {\n                                headers: {\n                                    Authorization: `Bearer ${localStorage.getItem('jwt_token')}`\n                                }\n                            }\n                        );\n                    } else {\n                        result = await this.axios.post(`http://localhost:3000/tutorials`, tutorial, {\n                            headers: {\n                                Authorization: `Bearer ${localStorage.getItem('jwt_token')}`\n                            }\n                        });\n                    }\n                    if (result.status === 200) {\n                        this.$router.push('/tutorials');\n                    } else {\n                        console.log('An error occured!');\n                    }\n                } catch (err) {\n                    console.log(err.message);\n                }\n            } else {\n                this.$swal.fire({\n                    icon: 'error',\n                    title: 'Field empty.',\n                    text: 'Please select a lecture!'\n                });\n            }\n        }\n    }\n};\n</script>\n"]}]}