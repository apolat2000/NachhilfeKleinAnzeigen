{"remainingRequest":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/Tutorials.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/src/components/Tutorials.vue","mtime":1609098560687},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ahmet/Desktop/Nachhilfekleinanzeigen/gruppe07/gruppe07/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUdXRvcmlhbHNJdGVtIGZyb20gIi4vVHV0b3JpYWxzSXRlbS52dWUiOwppbXBvcnQgVHV0b3JpYWxzUGFnZXMgZnJvbSAiLi9UdXRvcmlhbHNQYWdlcy52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgVHV0b3JpYWxzSXRlbSwgVHV0b3JpYWxzUGFnZXMgfSwKICBuYW1lOiAiVHV0b3JpYWxzIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdHV0b3JpYWxzOiBbXSwKICAgICAgaXNFZGl0YWJsZTogewogICAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB9LAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvL3VzZXIgaXMgbm90IGF1dGhvcml6ZWQgPT4gUmVtYWluIGF0IGxvZ2luIHBhZ2UKICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0X3Rva2VuIikgPT09IG51bGwpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgfQogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIHRyeSB7CiAgICAgIGNvbnN0IGp3dF90b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3RfdG9rZW4iKTsKICAgICAgaWYgKGp3dF90b2tlbikgewogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLmF4aW9zLnBvc3QoCiAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDozMDAwL3ZlcmlmeVJlZnJlc2hUb2tlbiIsCiAgICAgICAgICB7fSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0X3Rva2VuIil9YCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0KICAgICAgICApOwogICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3RfdG9rZW4iLCByZXN1bHQuZGF0YS5qd3RfdG9rZW4pOwogICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5heGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC90dXRvcmlhbHMiLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dF90b2tlbiIpfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy50dXRvcmlhbHMgPSByZXN1bHQuZGF0YS5maWx0ZXIoCiAgICAgICAgICAgICAgKGVsZW1lbnQpID0+IGVsZW1lbnQudHV0b3IgIT0gbnVsbCAmJiBlbGVtZW50LmxlY3R1cmUgIT0gbnVsbAogICAgICAgICAgICApOyAvL1RvIGZpbHRlciBvdXQgdHV0b3JpYWwgb2YgdXNlcnMgdGhhdCBkZWxldGVkIHRoZWlyIGFjY291bnQgLSBTaG91bGQgYWxzbyBoYXZlIGEgYmFja2VuZCBzb2x1dGlvbiBieSBlaXRoZXIgcmVmZXJlbmNpbmcgYSAiZGVsZXRlZCB1c2VyIiBvciAoZmF2b3VyYWJseSkgY29tcGxldGVseSBkZWxldGluZyB0aGUgdHV0b3JpYWwgZnJvbSB0aGUgREIuCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0VXNlcklkKCkgewogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJRCIpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Tutorials.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tutorials.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"flex flex-col\">\n      <div class=\"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n        <div class=\"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\">\n          <div\n            class=\"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg\"\n          >\n            <table class=\"min-w-full divide-y divide-gray-200\">\n              <thead class=\"bg-gray-50\">\n                <tr>\n                  <th\n                    scope=\"col\"\n                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                  >\n                    Lecture\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                  >\n                    Class size\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                  >\n                    Title\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                  >\n                    Status\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                  >\n                    Specifics\n                  </th>\n                  <th\n                    scope=\"col\"\n                    class=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                  >\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody v-bind:key=\"tutorial.id\" v-for=\"tutorial in tutorials\">\n                <tutorials-item\n                  v-bind:canEdit=\"getUserId() == tutorial.tutor._id\"\n                  v-bind:tutorial=\"tutorial\"\n                />\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n    <tutorials-pages v-bind:tutorialsLength=\"tutorials.length\"\n    v-bind:maxPages=\"Math.ceil(tutorials.length/10.0)\" />\n  </div>\n</template>\n\n<script>\nimport TutorialsItem from \"./TutorialsItem.vue\";\nimport TutorialsPages from \"./TutorialsPages.vue\";\n\nexport default {\n  components: { TutorialsItem, TutorialsPages },\n  name: \"Tutorials\",\n  data() {\n    return {\n      tutorials: [],\n      isEditable: {\n        default: false,\n      },\n    };\n  },\n  created() {\n    //user is not authorized => Remain at login page\n    if (localStorage.getItem(\"jwt_token\") === null) {\n      this.$router.push(\"/login\");\n    }\n  },\n  async mounted() {\n    try {\n      const jwt_token = localStorage.getItem(\"jwt_token\");\n      if (jwt_token) {\n        let result = await this.axios.post(\n          \"http://localhost:3000/verifyRefreshToken\",\n          {},\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"jwt_token\")}`,\n            },\n          }\n        );\n        if (result.status === 200) {\n          localStorage.setItem(\"jwt_token\", result.data.jwt_token);\n          result = await this.axios.get(\"http://localhost:3000/tutorials\", {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"jwt_token\")}`,\n            },\n          });\n          if (result.status === 200) {\n            this.tutorials = result.data.filter(\n              (element) => element.tutor != null && element.lecture != null\n            ); //To filter out tutorial of users that deleted their account - Should also have a backend solution by either referencing a \"deleted user\" or (favourably) completely deleting the tutorial from the DB.\n          }\n        }\n      }\n    } catch (err) {\n      console.log(err.message);\n    }\n  },\n  methods: {\n    getUserId() {\n      return localStorage.getItem(\"userID\");\n    },\n  },\n};\n</script>\n\n\n"]}]}